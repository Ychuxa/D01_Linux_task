
[[#Part 1. Установка ОС|Part 1. Установка ОС]]
[[#Part 2. Создание пользователя|Part 2. Создание пользователя]]
[[## Part 3. Настройка сети ОС|Part 3. Настройка сети ОС]]
[[#Part 4. Обновление ОС |Part 4. Обновление ОС ]]
[[#Part 5. Использование команды **sudo|Part 5. Использование команды sudo]]
[[#Part 6. Установка и настройка службы времени|Part 6. Установка и настройка службы времени]]
[[#Part 7. Установка и использование текстовых редакторов|Part 7. Установка и использование текстовых редакторов]]
[[#Part 8. Установка и базовая настройка сервиса **SSHD**|Part 8. Установка и базовая настройка сервиса SSHD]]
[[#Part 9. Установка и использование утилит **top**, **htop**|Part 9. Установка и использование утилит top, htop]]
[[#Part 10. Использование утилиты **fdisk**|Part 10. Использование утилиты fdisk]]
[[#Part 11. Использование утилиты **df|Part 11. Использование утилиты df]]
[[#Part 12. Использование утилиты **du**|Part 12. Использование утилиты du]]
[[#Part 13. Установка и использование утилиты **ncdu**|Part 13. Установка и использование утилиты ncdu]]
[[#Part 14. Работа с системными журналами|Part 14. Работа с системными журналами]]
[[#Part 15. Использование планировщика заданий **CRON**|Part 15. Использование планировщика заданий CRON]]

---
## Part 1. Установка ОС

*  ``Смотрим версию Ubuntu после установки``
![Part1](./screen/1.jpg)
---
## Part 2. Создание пользователя
* ``Создание пользователь и добавление в группу``
![Part1](./screen/2.jpg)
* ``Проверка файла passwd``
![Part1](./screen/3.jpg)
---
## Part 3. Настройка сети ОС
* ``Зададим название машины``
![Part1](./screen/4.jpg)
* ``Меняем тайм зону``
![Part1](./screen/5.jpg)
* ``Установим net-tools``
* ``sudo apt install net-tools``
* ``Выведем информацию о сетевых интерфейсах``
![Part1](./screen/6.jpg)
- **lo (loopback device)** – виртуальный интерфейс, присутствующий по умолчанию в любом Linux. Он используется для отладки сетевых программ и запуска серверных приложений на локальной машине. С этим интерфейсом всегда связан адрес 127.0.0.1.
* ``Получили ip от DHCP сервера``
![Part1](./screen/7.jpg)
* ``DHCP (Dynamic Host Configuration Protocol) - это протокол сетевого уровня, который позволяет устройствам автоматически получать IP-адрес, подсеть, шлюз по умолчанию и другие сетевые настройки от специального сервера, известного как DHCP-сервер.``
* ``Выводим внешний IP-адрес``
![Part1](./screen/8.jpg)
* ``Выводим внутренний IP-адрес``
![Part1](./screen/9.jpg)
* ``Меняем настройки сети вимом: sudo vim /etc/netplan/00-installer-config.yaml``
![Part1](./screen/10.jpg)
* ``Сохраняем изменения, перезагружаем машину``
![Part1](./screen/11.jpg)
* ``Пингуем хост 1.1.1.1``
![Part1](./screen/12.jpg)
* ``Пингуем хост ya.ru``
![Part1](./screen/13.jpg)
---
## Part 4. Обновление ОС 
* ``Обновляем пакеты до новой версии``
![Part1](./screen/14.jpg)
* ``Проверяем, что все обновлено``
![Part1](./screen/15.jpg)
---
## Part 5. Использование команды **sudo**
* ``sudo (Superuser Do) - это команда в Unix-подобных операционных системах, таких как Ubuntu, предназначенная для выполнения команд с привилегиями суперпользователя (root) или другого пользователя с административными правами. Это позволяет пользователям выполнять задачи, которые требуют повышенных привилегий, без необходимости постоянного входа в систему как суперпользователь.``
* ``Выдаем права sudo второму пользователю``
![Part1](./screen/16.jpg)
* ``Выдаем новое имя нашему хосту``
![Part1](./screen/17.jpg)
---
## Part 6. Установка и настройка службы времени
* Выведем время часового пояса с **NTPSynchronized=yes**
![Part1](./screen/18.jpg)
---
## Part 7. Установка и использование текстовых редакторов
* ``Откроем редактор VIM, заполним файл и сохраним его``
![Part1](./screen/19.jpg)
* ``Для выхода с сохранением изменений нужно нажать `ESC`, затем написать `:wq`, что означает write and quit.``
* ``Откроем редактор NANO, заполним файл и сохраним его``
![Part1](./screen/20.jpg)
* Для выхода с сохранением изменений нужно нажать `Ctrl+S` и затем `Ctrl+X`.
* ``Откроем редактор MCEDIT, заполним файл и сохраним его``
![Part1](./screen/21.jpg)
* Для выхода с сохранением изменений нужно нажать `F10` и выбрать `Yes`
* ``Поменяем в VIM файл на фразу 21 School 21``
![Part1](./screen/22.jpg)
* ``Поменяем в NANO файл на фразу 21 School 21``
![Part1](./screen/23.jpg)
* ``Поменяем в MCEDIT файл на фразу 21 School 21``
![Part1](./screen/24.jpg)
* ``Проверим, что ничего не поменялось``
![Part1](./screen/25.jpg)
* ``Отредактируем снова файл и сделаем поиск в VIM ESC + /<слово_для_поиска>``
![Part1](./screen/26.jpg)
*  ``Сделаем замену :s/<заменяемое>/<заменитель>``
![Part1](./screen/27.jpg)
* ``Отредактируем снова файл и сделаем поиск в NANO Ctrl + W``
![Part1](./screen/28.jpg)
* ``Сделаем замену Ctrl + \``
![Part1](./screen/29.jpg)
*  ``Выберем на что будем менять``
![Part1](./screen/30.jpg)
* ``Просмотрим результат замены``
![Part1](./screen/31.jpg)
* ``Отредактируем снова файл и сделаем поиск в MCEDIT F7``
![Part1](./screen/32.jpg)
* ``Сделаем замену F4``
![Part1](./screen/33.jpg)
* ``Просмотрим результат замены``
![Part1](./screen/34.jpg)
---
## Part 8. Установка и базовая настройка сервиса **SSHD**
* Установим службу SSHd с помощью команды: `sudo apt install openssh-server`
* Узнаем состояние SSHd службы, воспользовавшись командой: `sudo systemctl status ssh`
![Part1](./screen/35.jpg)
* Как видно на скриншоте, автостарт SSHd службы добавлен автоматически при загрузке. Чтобы включить автостарт можно воспользоваться командой `sudo systemctl enable ssh`, для выключения автостарта команда `sudo systemctl disable ssh`.
* Для перенастройки службы SSHd на порт 2022 откроем файл `sshd_config` с помощью команды `sudo nano /etc/ssh/sshd_config`
![Part1](./screen/36.jpg)
* `Перезапустим службу sudo systemctl restart ssh `
* `Проверим состояние SSHd службы после изменения порта командой sudo systemctl status ssh`
![Part1](./screen/37.jpg)
* `Настроим брандмауэр так, чтобы можно было использовать ssh, так как мы поменяли порт`
![Part1](./screen/38.jpg)
* `Просмотрим процесс sshd через команду ps`
![Part1](./screen/39.jpg)
 * ***ps** - утилита для просмотра списка процессов в Linux.  Параметр `-a` - выбрать все процессы всех пользователей, кроме фоновых. Параметр `-u` обозначает ориентированный на пользователя формат, который предоставляет подробную информацию о процессах. Параметр `-x` указывает `ps` перечислить процессы без управляющего терминала. В основном это процессы, которые запускаются во время загрузки и работают в фоновом режиме. `grep -i ssh` - выводит только те строчки, где есть ssh с игнорированием регистра за счет `-i`. Символ `|` перенаправляет вывод команды `ps aux` на ввод `grep -i ssh`.
 * `Выполним перезагрузку машины командой `reboot` и выполним команду netstat -tan`
![Part1](./screen/40.jpg)
- `netstat -tan` Команда `netstat` показывает статистику приема и отправки пакетов, а также информацию об ошибках приема и отправки. `-a` - Вывод всех активных подключений TCP и прослушиваемых компьютером портов TCP и UDP. `-n` - Вывод активных подключений TCP с отображением адресов и номеров портов в числовом формате без попыток определения имен. Тогда, если `netstat -na` - просмотр всех открытых протоколов, то `netstat -tan` - просмотр всех открытых ТСР-протоколов. При вызове команды в терминал выводится таблица, столбцы которой имеют следующие значения:  
- а) `Proto` - сетевой протокол (tcp, udp); 
- б) `Recv-Q` - количество байтов, помещённых в буфер приёма TCP/IP, но не переданных приложению. Если это число высокое, то нужно проверить работоспособность приложения, которое работает с данным портом.  
- в) `Send-Q` — количество байтов, помещённых в буфер отправки TCP/IP, но не отправленных, или отправленных, но не подтверждённых. Высокое значение может быть связано с перегрузкой сети сервера.  
- г) `Local Address` — локальный адрес сервера. В обычных соединениях, это адрес сервера на который пришло соединение. В прослушиваемых портах (LISTEN) — это диапазон адресов. Так 0.0.0.0:port — значит подключаться можно ко всем адресам сервера, а 192.168.0.5:port — значит подключаться можно только к этому адресу сервера. 
- д) `Foreign Address` — адрес второй стороны. В обычных соединениях, это адрес с которого пришло соединение. В прослушиваемых портах (LISTEN) — это диапазон адресов. Так 0.0.0.0:* — значит подключаться можно с любых адресов и с любых портов, а например 192.168.0.6:* — значит подключаться можно только с этого адреса и с любых портов.  
- е) `State` — состояние подключения, или прослушивания.
## Part 9. Установка и использование утилит **top**, **htop**
* `Выведем информацию с помощью команды top`
![Part1](./screen/41.jpg)
* `uptime - 12 минут;`
* `количество авторизованных пользователей - 1;`
* `общую загрузку системы - 0.00;`
* `общее количество процессов - 122;`
* `загрузку cpu - 0.0%;`
* `загрузку памяти - 167.2 из 1970.9;`
* `pid процесса занимающего больше всего памяти - 1;`
* `pid процесса, занимающего больше всего процессорного времени - 139 и 29;`
---
* `Выведем информацию с помощью команды htop`
![Part1](./screen/42.jpg)
- Для сортировки в `htop` нужно нажать `F6` и выбрать параметр сортировки. Отсортируем по `PID`
![Part1](./screen/43.jpg)
* Отсортируем по `PERCENT_CPU`
![Part1](./screen/44.jpg)
* Отсортируем по `PERCENT_MEM`
![Part1](./screen/45.jpg)
* Отсортируем по `TIME`
![Part1](./screen/46.jpg)
- Для использования фильтров в `htop` нужно нажать `F4` и выбрать параметр фильтрации. htop, отфильтрованный для процесса SSHd
![Part1](./screen/47.jpg)
- Для использования поиска в `htop` нужно нажать `F3` и ввести объект поиска. `htop` с процессом `syslog`, найденным, используя поиск
![Part1](./screen/48.jpg)
- Для добавления отображения дополнительных параметров в `htop`, необходимо нажать `F2` и добавить требуемые параметры. `htop` с добавленным выводом hostname, clock и uptime
![Part1](./screen/49.jpg)
---
## Part 10. Использование утилиты **fdisk**
* `Запустим команду fdisk -l`
![Part1](./screen/50.jpg)
- Название жесткого диска: VBOX HARDDISK (/dev/sda);
- Размер диска: 20 Гигабайт;
- Количество секторов: 41943040;
- `Узнаем размер swap`
![Part1](./screen/51.jpg)
* swap - 1966076 килобайт
---
## Part 11. Использование утилиты **df**
* `Используем команду df для просмотра информации`
![Part1](./screen/52.jpg)
* `Для корневого раздела (/):`
- Размер раздела: 10218772;  
- Размер занятого пространства: 4665140;  
- Размер свободного пространства: 5012960;  
- Процент использования: 49 %;  
* `Единицы измерения при выводе: Килобайты.`
* `Используем команду df -Th для просмотра информации`
![Part1](./screen/53.jpg)
* `Для корневого раздела (/):
- Размер раздела: 9.8;  
- Размер занятого пространства: 4.5;  
- Размер свободного пространства: 4.8;  
- Процент использования: 49 %;  
* `Единицы измерения при выводе: Гигабайты.`
* `Тип файловой системы: Ext4 - журналируемая файловая система, используемая в ОС на ядре Linux. Основана на файловой системе Ext3, но отличается тем, что в ней представлен механизм записи файлов в непрерывные участки блоков (екстенты), уменьшающий фрагментацию и повышающий производительность. В ней есть журналирование, то есть в ней предусмотрена запись некоторых данных, позволяющих восстановить файловую систему при сбоях в работе компьютера.`
---
## Part 12. Использование утилиты **du**
---
* `Используем команду du`
![Part1](./screen/54.jpg)
* `Выведем информацию по папке /home в двух видах`
![Part1](./screen/55.jpg)
* `Выведем информацию по папке /var в двух видах`
![Part1](./screen/56.jpg)
* `Выведем информацию по папке /var/log в двух видах`
![Part1](./screen/57.jpg)
* `Выведем информацию по папке /var/log в двух видах(не общее, а каждого вложенного элемента, используя *)`
![Part1](./screen/58.jpg)
## Part 13. Установка и использование утилиты **ncdu**
* `Установим ncdu`
![Part1](./screen/59.jpg)
* `Выведем информацию с помощью команды ncdu по папке /home`
![Part1](./screen/60.jpg)
* `Выведем информацию с помощью команды ncdu по папке /var`
![Part1](./screen/61.jpg)
* `Выведем информацию с помощью команды ncdu по папке /var/log`
![Part1](./screen/62.jpg)
---
## Part 14. Работа с системными журналами
* `Просмотрим файл /var/log/dmesg`
![Part1](./screen/63.jpg)
* `Просмотрим файл /var/log/syslog
![Part1](./screen/64.jpg)
* `Просмотрим файл /var/log/auth.log`
![Part1](./screen/65.jpg)
* `Просмотрим данные по последней авторизации`
![Part1](./screen/66.jpg)
- Время последней успешной авторизации: jul 5, 20:46:54
- Имя пользователя: ubuntu
- Метод входа в систему: by uid = 0 (User Identifier). Суперпользователь всегда должен иметь UID, равный нулю (0).
- `Перезапустим службу SSHd с помощью команды sudo systemctl restart ssh`
* `В журнале найдем сообщение о перезапуске службы`
![Part1](./screen/67.jpg)
---
## Part 15. Использование планировщика заданий **CRON**
* `Запустим команду `uptime` через каждые 2 минуты. Для этого откроем планировщик заданий `CRON` в текстовом редакторе `nano` с помощью команды`
![Part1](./screen/68.jpg)
* `Найдем в системных файлах информацию об выполнении uptime`
![Part1](./screen/69.jpg)
* `Выведем на экран список текущих заданий для CRON`
![Part1](./screen/70.jpg)
* `Удалим все задания из планировщика CRON и просмотрим список`
![Part1](./screen/71.jpg)
---